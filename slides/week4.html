---
layout: slide
title: "Uge 4 - Loops & methods"
solutions: "show"
---

	<section>
		<p> Program for i dag</p>
		<ul style="font-size: smaller;">
			<li>Vi skal lave øvelser med
				<ul style="font-size: smaller;">
					<li> Loops (<icode>for</icode> og <icode>while</icode> loops</li>
					<li> Methods (strings og lists)</li>
				</ul>
			</li>
			<li>Opgave 1: IMDb (Filmdata)</li>
			<li>Opgave 2: IMDb (Søgning)</li>
		</ol>
		</p>
	</section>


	<section>
		<p> Opgave 1: IMDb (Filmdata)</p>
		<p style="font-size: smaller;">
		I denne opgave skal vi arbejde med hvad bogen kalder "parallel" data, nemlig film og deres IMDb-ratings
		</p>
		<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cd/Toyogeki-Movie_Toyooka002.jpg/640px-Toyogeki-Movie_Toyooka002.jpg">
	</section>

	<section style="font-size: smaller;">
		<!--<p>Data/p>-->
			<pre><code data-trim data-noescape class="python">
					# Top 10 rated imdb movies
					movies = ["Fight Club", "The Godfather", "Schindler's List", "The Dark Knight", "The Lord of the Rings: The Return of the King", "The Shawshank Redemption", "The Godfather: Part II ", "Pulp Fiction", "12 Angry Men", "The Good, the Bad and the Ugly"]
					
					ratings = [8.8, 9.2, 8.9, 9.0, 8.9, 9.2, 9.0, 8.9, 8.9, 8.8] 
			</code></pre>
		</section>


	<section style="font-size: smaller;">
		<p>1.1 Data</p>
		<ol style="font-size: smaller;">
			<li>Brug et <icode>for</icode> loop til at printe alle filmene og deres ratings på linje:
				<ul style="list-style: none;">
					<li><icode>film1	rating1</icode></li>
					<li><icode>film2	rating2</icode></li>
				</ul>
			</li>
			<li>Gentag øvelsen, men brug et <icode>while</icode> loop i stedet</li>
		</ol>
	</section>

	<section style="font-size: smaller;" class="solution">
		<p>1.1 Data (løsning)</p>
		<pre><code data-trim data-noescape class="python">
			i = 0
			while i < len(movies):
				print(movies[i], "\t", ratings[i])
				i += 1

			print()
			for i in range(len(movies)):
				print(movies[i], "\t", ratings[i])
		</code></pre>
	</section>	

	<section style="font-size: smaller;">
		<p>1.2 Ranking</p>
		<ol style="font-size: smaller;">
			<li> Brug dataen i listerne til at finde
				<ul style="list-style: none;">
					<li>Den højest ratede film</li>
					<li>Den lavest ratede film</li>
				</ul>
			</li>
			<li>Brug et loop til at rangere alle filmtitlerne efter deres rating (både <icode>for</icode> og <icode>while</icode> loop duer) </li>
		</ol>
	</section>

	<section style="font-size: smaller;" class="solution">
			<p>1.2 Ranking (løsning)</p>
			<pre><code data-trim data-noescape class="python">
				# Highest rated movie
				top_rating = max(ratings)
				top_i = ratings.index(top_rating)
				top_movie = movies[top_i]

				print(top_movie, "("+str(top_rating)+")")

				# Lowest rated movie
				low_rating = min(ratings)
				low_i = ratings.index(low_rating)
				low_movie = movies[low_i]

				print(low_movie, "("+str(low_rating)+")")
			</code></pre>
	</section>


	<section style="font-size: smaller;" class="solution">
		<p>1.2 Ranking (løsning)</p>
			<pre><code data-trim data-noescape class="python">
				# Ranking
				# Top 10 rated imdb movies
				movies = ["Fight Club", "The Godfather", "Schindler's List", "The Dark Knight", "The Lord of the Rings: The Return of the King", "The Shawshank Redemption", "The Godfather: Part II ", "Pulp Fiction", "12 Angry Men", "The Good, the Bad and the Ugly"]
				ratings = [8.8, 9.2, 8.9, 9.0, 8.9, 9.2, 9.0, 8.9, 8.9, 8.8]

				sorted_ratings = []
				sorted_movies = []

				while ratings:
					top_score = max(ratings)
					top_i = ratings.index(top_score)
				
					sorted_ratings.append(ratings[top_i])
					sorted_movies.append(movies[top_i])
				
					ratings.remove(ratings[top_i])
					movies.remove(movies[top_i])

				print(sorted_ratings)
				print(sorted_movies)

				# Equivalent to while loop above
				#for i in range(len(ratings)):
				#	top_score = max(ratings)
				#	top_i = ratings.index(top_score)
				#
				#	sorted_ratings.append(ratings[top_i])
				#	sorted_movies.append(movies[top_i])
				#
				#	ratings.remove(ratings[top_i])
				#	movies.remove(movies[top_i])
			</code></pre>
	</section>

	<section>
		<p> Opgave 2: IMDb (Søgning)</p>
		<p style="font-size: smaller;">
		I denne opgave skal vi lave et lille program til at søge efter film og få deres ratings
		</p>
		<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcR8QSFlOG9e3DPyoTj3zRoJ-ghOSghmtWgzzMafQiYN0lFGW1a5Vw">
	</section>


	<section style="font-size: smaller;">
		<p>2.1 Filmsøgning</p>
		<ol style="font-size: smaller;">
			<li> Brug et <icode>while</icode> loop til acceptere input fra brugeren. Programmet skal spørge efter nye input indtil brugeren indtaster et stopord (for eksempel "quit"):
				<ul>
					<li>Hvis brugerens input er i listen over filmtitler, skal programmet printe filmens rating</li>
					<li>Hvis brugerens input ikke er en kendt film, skal programmet meddele at filmen ikke er fundet</li>
					<li>Programmet skal blive ved med at spørge om film, indtil stopordet er indtastet</li>
				</ul>

			</li>
		</ol>
	</section>

	<section style="font-size: smaller;" class="solution">
			<p>2.1 Filmsøgning (løsning)</p>
			<pre><code data-trim data-noescape class="python">
				# Top 10 rated imdb movies
				movies = ["Fight Club", "The Godfather", "Schindler's List", "The Dark Knight", "The Lord of the Rings: The Return of the King", "The Shawshank Redemption", "The Godfather: Part II ", "Pulp Fiction", "12 Angry Men", "The Good, the Bad and the Ugly"]

				ratings = [8.8, 9.2, 8.9, 9.0, 8.9, 9.2, 9.0, 8.9, 8.9, 8.8] 				
				stopword = "quit"

				while True:
					ui = input("Indtast en filmtitel (og '"+stopword+"' for at stoppe): ")

					if ui.lower() == stopword.lower():
						break

					if ui not in movies:
						print("Filmen er desværre ikke i listen. Prøv igen!")

					else:
						movie_i = movies.index(ui)
						movie_rating = ratings[movie_i]
						print("Filmen '"+ui+"' har fået en rating på "+str(movie_rating))

					print()
			</code></pre>
	</section>


	<section style="font-size: smaller;">
		<p>2.2 Omtrendt søgning</p>
		<p style="font-size: smaller;text-align:left;"> Det kan være svært at vide på forhånd præcist hvordan en titel er indtastet i listen. Ved at gøre søgningen 'omtrendt' vil resultatet være mindre sensitiv overfor variation og stavefejl</p>
		<ol style="font-size: smaller;">
		<li> Findes brugerens input ikke i listen over film, skal I give brugeren en rating for en lignende filmtitel</li>
			<li> Brug funktionen <icode>MinimumEditDistance</icode> til at finde ud af hvor meget brugerens input ligner de enkelte filmtitler fra listen
				<ul>
					<li>Eksempel: I listen over film finder vi <icode>"Schindler's List"</icode>. Hvis brugerens input er <icode>"schindlers liste"</icode> (som ikke er i listen), vil denne titel være et godt match, da ordene har en lille edit distance
				</ul>
			</li>
			
		<li>Print titel og rating for den film i listen der ligner mest</li>
		</ol>
	</section>	

	<section style="font-size: smaller;">
		
			<pre><code data-trim data-noescape class="python">
				def MinimumEditDistance(s1, s2):
					""" (str, str) -> int
						Calculates the edit distance between two strings,
						s1 and s2.
						Based on the pseudocode in 
						https://web.stanford.edu/~jurafsky/slp3/2.pdf
						[p. 24]
					"""
					# Ignore casing
					s1 = s1.lower()
					s2 = s2.lower()

					# Edit costs
					deletion_cost = 1
					insertion_cost = 1
					substitution_cost = 2

					n = len(s1)
					m = len(s2)

					# Initialize distance matrix
					D = [[0 for j in range(m+2)] for i in range(n+2)]

					for i in range(1, n+1):
						D[i][0] = D[i-1][0] + deletion_cost

					for j in range(1, m+1):
						D[0][j] = D[0][j-1] + insertion_cost

					# Compute distance
					for i in range(1, n+1):
						for j in range(1, m+1):
							del_cost = D[i-1][j] + deletion_cost
							ins_cost = D[i][j-1] + insertion_cost
							sub_cost = D[i-1][j-1]

							if s1[i-1] != s2[j-1]: sub_cost += substitution_cost
							
							D[i][j] = min([del_cost, ins_cost, sub_cost])

					return D[n][m]

				print(MinimumEditDistance("Sidsel", "Sissel"))
				print(MinimumEditDistance("Sidsel", "Lina"))
			</code></pre>
	</section>

	<section style="font-size: smaller;" class="solution">
		<p>2.2 Omtrendt søgning (løsning)</p>
			<pre><code data-trim data-noescape class="python">
				# Top 10 rated imdb movies
				movies = ["Fight Club", "The Godfather", "Schindler's List", "The Dark Knight", "The Lord of the Rings: The Return of the King", "The Shawshank Redemption", "The Godfather: Part II ", "Pulp Fiction", "12 Angry Men", "The Good, the Bad and the Ugly"]

				ratings = [8.8, 9.2, 8.9, 9.0, 8.9, 9.2, 9.0, 8.9, 8.9, 8.8] 
				stopword = "quit"

				while True:
					ui = input("Indtast en filmtitel (og '"+stopword+"' for at stoppe): ")

					if ui.lower() == stopword.lower():
						break

					if ui not in movies:
						
						distances = []

						# Calculate the distances between ui and known movies
						for movie in movies:
							med = MinimumEditDistance(movie, ui)
							distances.append(med)

						# Find the movie title most similar to ui
						most_similar_i = distances.index(min(distances))
						most_similar_title = movies[most_similar_i]
						most_similar_rating = ratings[most_similar_i]

						print("Filmen '"+most_similar_title+"' har fået en rating på "+str(most_similar_rating))

					else:
						movie_i = movies.index(ui)
						movie_rating = ratings[movie_i]
						print("Filmen '"+ui+"' har fået en rating på "+str(movie_rating))

					print()
			</code></pre>
	</section>


